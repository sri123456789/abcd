@Load
Feature: feature collection for the restrictedAreaNotams API on the load-service

  Background: 

    * def util = callonce read('classpath:com/jeppesen/ncs/common/Utility.feature')
    * string MaxAlt = util.random(10000)
    * string MinAlt = util.random(10)

  @FDS-19992-0
  Scenario: implementation to send request with linestring
    Given url 'https://ncs-load-ta-wus.azurewebsites.net/restrictedAreaNotams'
    And header Non-Human-Id-JWT-TOKEN = 'eyJraWQiOiJUQUdFQWItWXV4emxiV3pGM3g1ZTBQV2ZVZEUiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJOb24tSHVtYW4tSWQtSldUIiwiaWZzIjp7InNwQXR0cnMiOm51bGwsIm1haW51cG4iOm51bGwsIm1haW5vcmdhbml6YXRpb25pZCI6IlRCQyIsImFzc3VyYW5jZXNjb3JlIjpudWxsLCJhc3N1cmFuY2VsZXZlbCI6bnVsbH0sImlzcyI6IlBpbmdBY2Nlc3NBdXRoVG9rZW4iLCJmcCI6eyJzdWJqZWN0IjoiUGVyZlRlc3RYNTA5Q2xpZW50OjpDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUzo6ODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2IiwiYXV0aG5Tb3VyY2UiOiJQZXJmVGVzdFg1MDlDbGllbnQifSwiY2VydCI6eyJzdWJzaWRpYXJ5Y29tcGFueUlEIjpudWxsLCJJc3N1ZXIiOiJDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUyIsInN1YmplY3QiOiJDTj10ZXN0Y2xpZW50Y2VydC5mZWRwLmRpZ2l0YWxhdmlhdGlvbnNlcnZpY2VzLmNvbSxPVT1zZXJ2ZXJzLE89Qm9laW5nLEM9VVMiLCJzZXJ2aWNlIjpudWxsLCJ1QXR0cmlidXRlcyI6bnVsbCwic3Vic2lkaWFyeUlEIjoiVEJDIiwiYm9laW5nQ29tcGFueUlEIjoiVEJDIiwic2VydmljZUlEIjoiUGVyZlRlc3RYNTA5Q2xpZW50Iiwic2VyaWFsTm8iOiIjODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2In0sImV4cCI6MTYyOTIyNjU3MCwiaWF0IjoxNjI5MjI1Njc1fQ.-8Ucf8ao4Y5j7mmo-OLvVdAKwcwGEEodCpjSqdlv0t935GxNhTbMhml6v2plMRYaGyF-d-MNkXaGbLzZvuzbtg'
    And header Accept = 'application/json'
    And def coordinate_geometry =
      """
      {
         "type": "GeometryCollection",
         "geometries": [
            {
                  "type": "LineString",
                  "coordinates": [
                  
               [127.366667,36.433333],
               [127.366667,36.439993]
             ]
             }
         ]
       }
      """
    And form field geopolygon = coordinate_geometry
    And form field startDateTime = '2019-01-20T15:00:00Z'
    And form field endDateTime = '2020-09-19T15:00:00Z'
    And form field minAltitude = 0
    And form field maxAltitude = 5000
    When method GET
    Then status 200
    And match $ contains  []

  @FDS-19992-1
  Scenario: implementation to send request with point and linestrings
    Given url 'https://ncs-load-ta-wus.azurewebsites.net/restrictedAreaNotams'
    And header Non-Human-Id-JWT-TOKEN = 'eyJraWQiOiJUQUdFQWItWXV4emxiV3pGM3g1ZTBQV2ZVZEUiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJOb24tSHVtYW4tSWQtSldUIiwiaWZzIjp7InNwQXR0cnMiOm51bGwsIm1haW51cG4iOm51bGwsIm1haW5vcmdhbml6YXRpb25pZCI6IlRCQyIsImFzc3VyYW5jZXNjb3JlIjpudWxsLCJhc3N1cmFuY2VsZXZlbCI6bnVsbH0sImlzcyI6IlBpbmdBY2Nlc3NBdXRoVG9rZW4iLCJmcCI6eyJzdWJqZWN0IjoiUGVyZlRlc3RYNTA5Q2xpZW50OjpDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUzo6ODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2IiwiYXV0aG5Tb3VyY2UiOiJQZXJmVGVzdFg1MDlDbGllbnQifSwiY2VydCI6eyJzdWJzaWRpYXJ5Y29tcGFueUlEIjpudWxsLCJJc3N1ZXIiOiJDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUyIsInN1YmplY3QiOiJDTj10ZXN0Y2xpZW50Y2VydC5mZWRwLmRpZ2l0YWxhdmlhdGlvbnNlcnZpY2VzLmNvbSxPVT1zZXJ2ZXJzLE89Qm9laW5nLEM9VVMiLCJzZXJ2aWNlIjpudWxsLCJ1QXR0cmlidXRlcyI6bnVsbCwic3Vic2lkaWFyeUlEIjoiVEJDIiwiYm9laW5nQ29tcGFueUlEIjoiVEJDIiwic2VydmljZUlEIjoiUGVyZlRlc3RYNTA5Q2xpZW50Iiwic2VyaWFsTm8iOiIjODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2In0sImV4cCI6MTYyOTIyNjU3MCwiaWF0IjoxNjI5MjI1Njc1fQ.-8Ucf8ao4Y5j7mmo-OLvVdAKwcwGEEodCpjSqdlv0t935GxNhTbMhml6v2plMRYaGyF-d-MNkXaGbLzZvuzbtg'
    And header Accept = 'application/json'
    And def coordinate_geometry =
      """
      {
         "type": "GeometryCollection",
         "geometries": [
            {
                "type": "Point",
                "coordinates": [-49.16675806045532,-25.10042590085026]
             },
             {
                "type": "LineString",
                "coordinates": [
                   
               [4.9493408203125,48.36571583338893],
               [4.949855804443359,48.273825016632706]
             ]
             },
            
             {
                "type": "Point",
                "coordinates": [-49.16675806045532,-25.10990802262477]
             }
       ]
       }
      """
    And form field geopolygon = coordinate_geometry
    And form field startDateTime = '2019-01-20T15:00:00Z'
    And form field endDateTime = '2020-09-19T15:00:00Z'
    And form field minAltitude = 0
    And form field maxAltitude = 5000
    When method GET
    Then status 200
    And match $ contains [{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-49.11159254297388,-25.099308838809595],[-49.11280090949521,-25.089538772109396],[-49.11607872319191,-25.08017101773444],[-49.12129963151234,-25.071565420300896],[-49.12826275992724,-25.06405248369438],[-49.136700467329725,-25.057920701117858],[-49.14628863897383,-25.053405502578862],[-49.156659120328506,-25.050680239395714],[-49.167413817368725,-25.04984954737535],[-49.17813992867926,-25.050945339972003],[-49.18842573404924,-25.05392558328345],[-49.197876344143864,-25.05867589976123],[-49.20612881693896,-25.065013940754785],[-49.21286606891209,-25.072696363294657],[-49.2178290519382,-25.081428147623587],[-49.220826729280695,-25.09087390253132],[-49.221743464220054,-25.100670728896468],[-49.22054353030123,-25.110442150966133],[-49.21727255984574,-25.1198125822857],[-49.212055863584574,-25.128421770699514],[-49.205093674797695,-25.13593866562868],[-49.19665349153926,-25.142074171251743],[-49.18705980547925,-25.146592290760527],[-49.176681610667764,-25.1493192281445],[-49.16591817543516,-25.150150092713897],[-49.15518363151012,-25.149052944745197],[-49.14489098289523,-25.14607002448431],[-49.13543616074811,-25.141316117022015],[-49.12718274833826,-25.134974117704637],[-49.120447972233066,-25.12728797212081],[-49.11549050362655,-25.11855326682691],[-49.112500539734114,-25.109105837722602],[-49.11159254297388,-25.099308838809595]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":4500}}],"notamProperties":{"ntmNumber":"Z0465\/19","ntmNotamType":"D1","fir":{"ntmFir":[{"firId":"SBCW"}]},"ntmEffDate":{"value":"2019-06-20T00:00:00Z","effIndicator":""},"ntmExpDate":{"value":"3000-12-31T23:59:59Z","expIndicator":"PERM"},"qcode":{"ntmQcd":[{"qcdId":"RRCA","qcdDecode":"RESTRICTED AREA ACTIVATED"}]},"ntmTxtContent":"\nSBR 592 (SANTANA BAIXO) ACT:\n1- BDRY LATERAIS: 25 08 02 S 049 12 32 W\/ 25 06 48 S 049 12 38\nW\/ 25 05 05 S 049 11 03 W \/ 25 05 32 S 049 09 19 W\n2- BDRY VERTICAIS: GND - 4500FT AMSL\n3- CARATER: PERMANENTE SOB VMC: ATIVADA DE 1400UTC AS 2100UTC\n4- TIPO DE RESTRIAO: VOOS DE PARAPENTE DO CLUBE DA CORDILHEIRA\nDO SANTANA\nREF: ENRC L1\nARC CURITIBA \/ FLORIANOPOLIS.\n","ntmTxtLowerLimit":"\nGND \n","ntmTxtUpperLimit":"\n4500FT AMSL\n","ntmJeppStatusDate":"2019-06-03T18:41:14Z","jeppNumber":"20190604FFF"}},{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[5.722877814761678,48.25095467351134],[5.713366981201818,48.351960486017596],[5.674389830451776,48.449780096093825],[5.607289370073484,48.540628435759565],[5.514531805412222,48.620970093541246],[5.399630047477114,48.68766181965014],[5.267017718803308,48.73808195036374],[5.121876733438708,48.77024041825556],[4.969925134827113,48.782863602448884],[4.81717531174562,48.775449349468545],[4.669675471042275,48.748289012601795],[4.533248883297929,48.70245519428662],[4.413245657021739,48.63975585291548],[4.314320596736799,48.562657347611506],[4.240248263623505,48.47418064934827],[4.193783081832808,48.377776198689794],[4.176568715893473,48.2771836630715],[4.189097471543124,48.1762831374686],[4.230717528563464,48.078944201116634],[4.299683629117665,47.988878788547694],[4.393245483553863,47.909503167663345],[4.507767545420159,47.84381354381077],[4.63887378677423,47.794279006394774],[4.781611473382831,47.762754754506155],[4.930628499798525,47.750417805383414],[5.080359428989147,47.757726709888146],[5.225215864069788,47.784406166436604],[5.359777077248335,47.829456827059154],[5.478976888731395,47.891190012015294],[5.578282616886186,47.9672864766352],[5.653861536671649,48.05487778819482],[5.702729751608267,48.150648253445915],[5.722877814761678,48.25095467351134]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":9500}}],"notamProperties":{"ntmNumber":"R2633\/19","ntmNotamType":"C1","fir":{"ntmFir":[{"firId":"LFEE"},{"firId":"LFFF"}]},"ntmEffDate":{"value":"2019-11-07T00:00:00Z","effIndicator":""},"ntmExpDate":{"value":"2027-12-30T23:59:00Z","expIndicator":""},"qcode":{"ntmQcd":[{"qcdId":"RTCA","qcdDecode":"TEMPORARY RESTRICTED AREA ACTIVATED"}]},"ntmTxtContent":"\nDRONES FLIGHTS OVER CHAUMONT REGION - AIP SUP 279\/19:\nSUBJECT: CREATION OF 5 TEMPO RESTRICTED AREAS.\nTHIS AIP SUP IS AVBL AT WWW.SIA.AVIATION-CIVILE.GOUV.FR\n","ntmTxtLowerLimit":"\nSFC \n","ntmTxtUpperLimit":"\nFL095\n","ntmJeppStatusDate":"2019-09-26T08:43:23Z","jeppNumber":"201909425C2"}}], expected: {type=FeatureCollection, features=[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[-49.1115925429739,-25.0993088388096],[-49.1128009094952,-25.0895387721094],[-49.1160787231919,-25.0801710177344],[-49.1212996315123,-25.0715654203009],[-49.1282627599272,-25.0640524836944],[-49.1367004673297,-25.0579207011179],[-49.1462886389738,-25.0534055025789],[-49.1566591203285,-25.0506802393957],[-49.1674138173687,-25.0498495473753],[-49.1781399286793,-25.050945339972],[-49.1884257340492,-25.0539255832835],[-49.1978763441439,-25.0586758997612],[-49.206128816939,-25.0650139407548],[-49.2128660689121,-25.0726963632947],[-49.2178290519382,-25.0814281476236],[-49.2208267292807,-25.0908739025313],[-49.2217434642201,-25.1006707288965],[-49.2205435303012,-25.1104421509661],[-49.2172725598457,-25.1198125822857],[-49.2120558635846,-25.1284217706995],[-49.2050936747977,-25.1359386656287],[-49.1966534915393,-25.1420741712517],[-49.1870598054793,-25.1465922907605],[-49.1766816106678,-25.1493192281445],[-49.1659181754352,-25.1501500927139],[-49.1551836315101,-25.1490529447452],[-49.1448909828952,-25.1460700244843],[-49.1354361607481,-25.141316117022],[-49.1271827483383,-25.1349741177046],[-49.1204479722331,-25.1272879721208],[-49.1154905036266,-25.1185532668269],[-49.1125005397341,-25.1091058377226],[-49.1115925429739,-25.0993088388096]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":4500}}], notamProperties={ntmNumber=Z0465/19, ntmNotamType=D1, fir={ntmFir=[{"firId":"SBCW"}]}, ntmEffDate={value=2019-06-20T00:00:00Z, effIndicator=}, ntmExpDate={value=3000-12-31T23:59:59Z, expIndicator=PERM}, qcode={ntmQcd=[{"qcdId":"RRCA","qcdDecode":"RESTRICTED AREA ACTIVATED"}]}, ntmTxtContent=SBR 592 (SANTANA BAIXO) ACT:1- BDRY LATERAIS: 25 08 02 S 049 12 32 W/ 25 06 48 S 049 12 38 W/ 25 05 05 S 049 11 03 W / 25 05 32 S 049 09 19 W 2- BDRY VERTICAIS: GND - 4500FT AMSL 3- CARATER: PERMANENTE SOB VMC: ATIVADA DE 1400UTC AS 2100UTC 4- TIPO DE RESTRIAO: VOOS DE PARAPENTE DO CLUBE DA CORDILHEIRA DO SANTANA REF: ENRC L1 ARC CURITIBA / FLORIANOPOLIS., ntmTxtLowerLimit=GND,ntmTxtUpperLimit=4500FT AMSL, ntmJeppStatusDate=2019-06-03T18:41:14Z, jeppNumber=20190604FFF}}
 
  @FDS-19992-3
  Scenario: implementation to send request with Points
    Given url 'https://ncs-load-ta-wus.azurewebsites.net/restrictedAreaNotams'
    And header Non-Human-Id-JWT-TOKEN = 'eyJraWQiOiJUQUdFQWItWXV4emxiV3pGM3g1ZTBQV2ZVZEUiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJOb24tSHVtYW4tSWQtSldUIiwiaWZzIjp7InNwQXR0cnMiOm51bGwsIm1haW51cG4iOm51bGwsIm1haW5vcmdhbml6YXRpb25pZCI6IlRCQyIsImFzc3VyYW5jZXNjb3JlIjpudWxsLCJhc3N1cmFuY2VsZXZlbCI6bnVsbH0sImlzcyI6IlBpbmdBY2Nlc3NBdXRoVG9rZW4iLCJmcCI6eyJzdWJqZWN0IjoiUGVyZlRlc3RYNTA5Q2xpZW50OjpDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUzo6ODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2IiwiYXV0aG5Tb3VyY2UiOiJQZXJmVGVzdFg1MDlDbGllbnQifSwiY2VydCI6eyJzdWJzaWRpYXJ5Y29tcGFueUlEIjpudWxsLCJJc3N1ZXIiOiJDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUyIsInN1YmplY3QiOiJDTj10ZXN0Y2xpZW50Y2VydC5mZWRwLmRpZ2l0YWxhdmlhdGlvbnNlcnZpY2VzLmNvbSxPVT1zZXJ2ZXJzLE89Qm9laW5nLEM9VVMiLCJzZXJ2aWNlIjpudWxsLCJ1QXR0cmlidXRlcyI6bnVsbCwic3Vic2lkaWFyeUlEIjoiVEJDIiwiYm9laW5nQ29tcGFueUlEIjoiVEJDIiwic2VydmljZUlEIjoiUGVyZlRlc3RYNTA5Q2xpZW50Iiwic2VyaWFsTm8iOiIjODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2In0sImV4cCI6MTYyOTIyNjU3MCwiaWF0IjoxNjI5MjI1Njc1fQ.-8Ucf8ao4Y5j7mmo-OLvVdAKwcwGEEodCpjSqdlv0t935GxNhTbMhml6v2plMRYaGyF-d-MNkXaGbLzZvuzbtg'
    And header Accept = 'application/json'
    And def coordinate_geometry =
      """
      {
         "type": "GeometryCollection",
         "geometries": [
            {
                "type": "Point",
                "coordinates": [4.949684143066406,48.365943927436675]
             }
            
             {
                "type": "Point",
                "coordinates": [4.9493408203125,48.273825016632706]
             }
      
           ]
       }
       ]
       }
      """
    And form field geopolygon = coordinate_geometry
    And form field startDateTime = '2019-01-20T15:00:00Z'
    And form field endDateTime = '2020-09-19T15:00:00Z'
    And form field minAltitude = 0
    And form field maxAltitude = 5000
    When method GET
    Then status 200
    And match $ contains [{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[5.722877814761678,48.25095467351134],[5.713366981201818,48.351960486017596],[5.674389830451776,48.449780096093825],[5.607289370073484,48.540628435759565],[5.514531805412222,48.620970093541246],[5.399630047477114,48.68766181965014],[5.267017718803308,48.73808195036374],[5.121876733438708,48.77024041825556],[4.969925134827113,48.782863602448884],[4.81717531174562,48.775449349468545],[4.669675471042275,48.748289012601795],[4.533248883297929,48.70245519428662],[4.413245657021739,48.63975585291548],[4.314320596736799,48.562657347611506],[4.240248263623505,48.47418064934827],[4.193783081832808,48.377776198689794],[4.176568715893473,48.2771836630715],[4.189097471543124,48.1762831374686],[4.230717528563464,48.078944201116634],[4.299683629117665,47.988878788547694],[4.393245483553863,47.909503167663345],[4.507767545420159,47.84381354381077],[4.63887378677423,47.794279006394774],[4.781611473382831,47.762754754506155],[4.930628499798525,47.750417805383414],[5.080359428989147,47.757726709888146],[5.225215864069788,47.784406166436604],[5.359777077248335,47.829456827059154],[5.478976888731395,47.891190012015294],[5.578282616886186,47.9672864766352],[5.653861536671649,48.05487778819482],[5.702729751608267,48.150648253445915],[5.722877814761678,48.25095467351134]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":9500}}],"notamProperties":{"ntmNumber":"R2633\/19","ntmNotamType":"C1","fir":{"ntmFir":[{"firId":"LFEE"},{"firId":"LFFF"}]},"ntmEffDate":{"value":"2019-11-07T00:00:00Z","effIndicator":""},"ntmExpDate":{"value":"2027-12-30T23:59:00Z","expIndicator":""},"qcode":{"ntmQcd":[{"qcdId":"RTCA","qcdDecode":"TEMPORARY RESTRICTED AREA ACTIVATED"}]},"ntmTxtContent":"\nDRONES FLIGHTS OVER CHAUMONT REGION - AIP SUP 279\/19:\nSUBJECT: CREATION OF 5 TEMPO RESTRICTED AREAS.\nTHIS AIP SUP IS AVBL AT WWW.SIA.AVIATION-CIVILE.GOUV.FR\n","ntmTxtLowerLimit":"\nSFC \n","ntmTxtUpperLimit":"\nFL095\n","ntmJeppStatusDate":"2019-09-26T08:43:23Z","jeppNumber":"201909425C2"}}], expected: {type=FeatureCollection, features=[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[5.72287781476168,48.2509546735113],[5.71336698120182,48.3519604860176],[5.67438983045178,48.4497800960938],[5.60728937007349,48.5406284357596],[5.51453180541222,48.6209700935413],[5.39963004747711,48.6876618196501],[5.26701771880331,48.7380819503638],[5.12187673343871,48.7702404182556],[4.96992513482711,48.7828636024489],[4.81717531174562,48.7754493494685],[4.66967547104228,48.7482890126018],[4.53324888329793,48.7024551942866],[4.41324565702174,48.6397558529155],[4.3143205967368,48.5626573476115],[4.2402482636235,48.4741806493483],[4.19378308183281,48.3777761986898],[4.17656871589347,48.2771836630715],[4.18909747154312,48.1762831374686],[4.23071752856346,48.0789442011166],[4.29968362911767,47.9888787885477],[4.39324548355386,47.9095031676634],[4.50776754542016,47.8438135438108],[4.63887378677423,47.7942790063948],[4.78161147338283,47.7627547545062],[4.93062849979852,47.7504178053834],[5.08035942898915,47.7577267098881],[5.22521586406979,47.7844061664366],[5.35977707724834,47.8294568270592],[5.4789768887314,47.8911900120153],[5.57828261688619,47.9672864766352],[5.65386153667165,48.0548777881948],[5.70272975160827,48.1506482534459],[5.72287781476168,48.2509546735113]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":9500}}], notamProperties={ntmNumber=R2633/19, ntmNotamType=C1, fir={ntmFir=[{"firId":"LFEE"},{"firId":"LFFF"}]}, ntmEffDate={value=2019-11-07T00:00:00Z, effIndicator=}, ntmExpDate={value=2027-12-30T23:59:00Z, expIndicator=}, qcode={ntmQcd=[{"qcdId":"RTCA","qcdDecode":"TEMPORARY RESTRICTED AREA ACTIVATED"}]}, ntmTxtContent=DRONES FLIGHTS OVER CHAUMONT REGION - AIP SUP 279/19:SUBJECT: CREATION OF 5 TEMPO RESTRICTED AREAS.THIS AIP SUP IS AVBL AT WWW.SIA.AVIATION-CIVILE.GOUV.FR, ntmTxtLowerLimit=SFC, ntmTxtUpperLimit=FL095, ntmJeppStatusDate=2019-09-26T08:43:23Z, jeppNumber=201909425C2}}
  
  @FDS-19992-4
  Scenario: implementation to send request with Polygon and Points
    Given url 'https://ncs-load-ta-wus.azurewebsites.net/restrictedAreaNotams'
    And header Non-Human-Id-JWT-TOKEN = 'eyJraWQiOiJUQUdFQWItWXV4emxiV3pGM3g1ZTBQV2ZVZEUiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJOb24tSHVtYW4tSWQtSldUIiwiaWZzIjp7InNwQXR0cnMiOm51bGwsIm1haW51cG4iOm51bGwsIm1haW5vcmdhbml6YXRpb25pZCI6IlRCQyIsImFzc3VyYW5jZXNjb3JlIjpudWxsLCJhc3N1cmFuY2VsZXZlbCI6bnVsbH0sImlzcyI6IlBpbmdBY2Nlc3NBdXRoVG9rZW4iLCJmcCI6eyJzdWJqZWN0IjoiUGVyZlRlc3RYNTA5Q2xpZW50OjpDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUzo6ODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2IiwiYXV0aG5Tb3VyY2UiOiJQZXJmVGVzdFg1MDlDbGllbnQifSwiY2VydCI6eyJzdWJzaWRpYXJ5Y29tcGFueUlEIjpudWxsLCJJc3N1ZXIiOiJDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUyIsInN1YmplY3QiOiJDTj10ZXN0Y2xpZW50Y2VydC5mZWRwLmRpZ2l0YWxhdmlhdGlvbnNlcnZpY2VzLmNvbSxPVT1zZXJ2ZXJzLE89Qm9laW5nLEM9VVMiLCJzZXJ2aWNlIjpudWxsLCJ1QXR0cmlidXRlcyI6bnVsbCwic3Vic2lkaWFyeUlEIjoiVEJDIiwiYm9laW5nQ29tcGFueUlEIjoiVEJDIiwic2VydmljZUlEIjoiUGVyZlRlc3RYNTA5Q2xpZW50Iiwic2VyaWFsTm8iOiIjODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2In0sImV4cCI6MTYyOTIyNjU3MCwiaWF0IjoxNjI5MjI1Njc1fQ.-8Ucf8ao4Y5j7mmo-OLvVdAKwcwGEEodCpjSqdlv0t935GxNhTbMhml6v2plMRYaGyF-d-MNkXaGbLzZvuzbtg'
    And header Accept = 'application/json'
    And def coordinate_geometry =
      """
      {
         "type": "GeometryCollection",
         "geometries": [
      {
         "type": "Polygon",
         "coordinates": [
           [
               [
                   37.149925231933594,
                   38.9232925919493
                 ],
                 [
                   37.14996814727783,
                   38.9232925919493
                 ],
                 [
                   37.14996814727783,
                   38.93327478622361
                 ],
                 [
                   37.149925231933594,
                   38.93327478622361
                 ],
                 [
                   37.149925231933594,
                   38.9232925919493
                 ]
      
           ]
         ]
       }
        {
                "type": "Point",
                "coordinates": [37.14994668960571,38.92317573520367]
             }
       ]
       }
      """
    And form field geopolygon = coordinate_geometry
    And form field startDateTime = '2019-01-20T15:00:00Z'
    And form field endDateTime = '2020-09-19T15:00:00Z'
    And form field minAltitude = 0
    And form field maxAltitude = 5000
    When method GET
    Then status 200
    And match $ contains [{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[46.163748742591146,38.727760387014996],[46.13050010829925,40.10488332943653],[45.743430311195084,41.45074402409343],[44.99530225265349,42.711501793324615],[43.895254922521,43.832696562125186],[42.47328266238656,44.76193667439318],[40.78331981321972,45.45252685173506],[38.90314060373718,45.867665107263484],[36.92971337315495,45.98443226385062],[34.97003781230194,45.79658239415478],[33.12934702302491,45.315318023500176],[31.499792756519565,44.567802558454346],[30.15250306947061,43.593861520890044],[29.134369114090877,42.441794456402036],[28.46910036321181,41.16426800773392],[28.1609560911228,39.81496341838505],[28.199391600807783,38.44623292612531],[28.5633287656262,37.10767351739484],[29.22440842849046,35.84533524624874],[30.14911021751985,34.70123536788065],[31.299943413281405,33.712902790604474],[32.63604765852699,32.912783892829935],[34.11355182274616,32.327465418215326],[35.685970724296446,31.97678516379889],[37.304806232072956,31.872981981977226],[38.920390489058164,32.0200637267988],[40.4828956741055,32.41353778423167],[41.943367322275854,33.040565003826416],[43.254636989800744,33.880493577004415],[44.372036176402,34.905642288417496],[45.253948220305205,36.08216384612465],[45.862367245183066,37.370842518714],[46.163748742591146,38.727760387014996]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":99999}}],"notamProperties":{"ntmNumber":"A5512\/19","ntmNotamType":"C1","fir":{"ntmFir":[{"firId":"LTAA"}]},"ntmEffDate":{"value":"2019-10-01T13:39:00Z","effIndicator":""},"ntmExpDate":{"value":"2025-12-03T11:00:00Z","expIndicator":"EST"},"qcode":{"ntmQcd":[{"qcdId":"GWXX","qcdDecode":"GNSS AREA-WIDE OPERATIONS  "}]},"ntmTxtContent":"\nRECENTLY, GPS SIGNAL OUTAGES HAVE BEEN REPORTED BY THE PILOTS OF\nTHE\nAIRCRAFT OPERATING WITHIN SOME PARTS OF ANKARA FIR.\nAIRCRAFT OPERATORS OPERATING WITHIN ANKARA FIR ARE ADVICED TO BE\nCAUTIOUS ABOUT GPS OUTAGES.\n","ntmJeppStatusDate":"2019-10-01T13:40:51Z","jeppNumber":"201910013ED"}}], expected: {type=FeatureCollection, features=[{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[46.1637487425911,38.727760387015],[46.1305001082993,40.1048833294365],[45.7434303111951,41.4507440240934],[44.9953022526535,42.7115017933246],[43.895254922521,43.8326965621252],[42.4732826623866,44.7619366743932],[40.7833198132197,45.4525268517351],[38.9031406037372,45.8676651072635],[36.929713373155,45.9844322638506],[34.970037812302,45.7965823941548],[33.1293470230249,45.3153180235002],[31.4997927565196,44.5678025584543],[30.1525030694706,43.59386152089],[29.1343691140909,42.441794456402],[28.4691003632118,41.1642680077339],[28.1609560911228,39.8149634183851],[28.1993916008078,38.4462329261253],[28.5633287656262,37.1076735173948],[29.2244084284905,35.8453352462487],[30.1491102175199,34.7012353678806],[31.2999434132814,33.7129027906045],[32.636047658527,32.9127838928299],[34.1135518227462,32.3274654182153],[35.6859707242964,31.9767851637989],[37.304806232073,31.8729819819772],[38.9203904890582,32.0200637267988],[40.4828956741055,32.4135377842317],[41.9433673222759,33.0405650038264],[43.2546369898007,33.8804935770044],[44.372036176402,34.9056422884175],[45.2539482203052,36.0821638461247],[45.8623672451831,37.370842518714],[46.1637487425911,38.727760387015]]]},"properties":{"lower_alt_msl_ft":0,"upper_alt_msl_ft":99999}}], notamProperties={ntmNumber=A5512/19, ntmNotamType=C1, fir={ntmFir=[{"firId":"LTAA"}]}, ntmEffDate={value=2019-10-01T13:39:00Z, effIndicator=}, ntmExpDate={value=2025-12-03T11:00:00Z, expIndicator=EST}, qcode={ntmQcd=[{"qcdId":"GWXX","qcdDecode":"GNSS AREA-WIDE OPERATIONS  "}]}, ntmTxtContent=RECENTLY, GPS SIGNAL OUTAGES HAVE BEEN REPORTED BY THE PILOTS OF THE AIRCRAFT OPERATING WITHIN SOME PARTS OF ANKARA FIR.AIRCRAFT OPERATORS OPERATING WITHIN ANKARA FIR ARE ADVICED TO BE CAUTIOUS ABOUT GPS OUTAGES.,ntmJeppStatusDate=2019-10-01T13:40:51Z, jeppNumber=201910013ED}}
  @FDS-19992-5
  Scenario: implementation to send requestwith Polygon and Linestring
    Given url 'https://ncs-load-ta-wus.azurewebsites.net/restrictedAreaNotams'
    And header Non-Human-Id-JWT-TOKEN = 'eyJraWQiOiJUQUdFQWItWXV4emxiV3pGM3g1ZTBQV2ZVZEUiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJOb24tSHVtYW4tSWQtSldUIiwiaWZzIjp7InNwQXR0cnMiOm51bGwsIm1haW51cG4iOm51bGwsIm1haW5vcmdhbml6YXRpb25pZCI6IlRCQyIsImFzc3VyYW5jZXNjb3JlIjpudWxsLCJhc3N1cmFuY2VsZXZlbCI6bnVsbH0sImlzcyI6IlBpbmdBY2Nlc3NBdXRoVG9rZW4iLCJmcCI6eyJzdWJqZWN0IjoiUGVyZlRlc3RYNTA5Q2xpZW50OjpDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUzo6ODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2IiwiYXV0aG5Tb3VyY2UiOiJQZXJmVGVzdFg1MDlDbGllbnQifSwiY2VydCI6eyJzdWJzaWRpYXJ5Y29tcGFueUlEIjpudWxsLCJJc3N1ZXIiOiJDTj1Cb2VpbmcgQmFzaWMgQXNzdXJhbmNlIFNvZnR3YXJlIElzc3VpbmcgQ0EgRzMsT1U9Y2VydHNlcnZlcnMsTz1Cb2VpbmcsQz1VUyIsInN1YmplY3QiOiJDTj10ZXN0Y2xpZW50Y2VydC5mZWRwLmRpZ2l0YWxhdmlhdGlvbnNlcnZpY2VzLmNvbSxPVT1zZXJ2ZXJzLE89Qm9laW5nLEM9VVMiLCJzZXJ2aWNlIjpudWxsLCJ1QXR0cmlidXRlcyI6bnVsbCwic3Vic2lkaWFyeUlEIjoiVEJDIiwiYm9laW5nQ29tcGFueUlEIjoiVEJDIiwic2VydmljZUlEIjoiUGVyZlRlc3RYNTA5Q2xpZW50Iiwic2VyaWFsTm8iOiIjODQ3NDI4ODk0MjA0MzcyOTI5OTk5OTM2NTYxNDg0ODM2NTUwMDgzNzE5NjM2In0sImV4cCI6MTYyOTIyNjU3MCwiaWF0IjoxNjI5MjI1Njc1fQ.-8Ucf8ao4Y5j7mmo-OLvVdAKwcwGEEodCpjSqdlv0t935GxNhTbMhml6v2plMRYaGyF-d-MNkXaGbLzZvuzbtg'
    And header Accept = 'application/json'
    And def coordinate_geometry =
      """
      {
         "type": "GeometryCollection",
         "geometries": [
      {
         "type": "Polygon",
         "coordinates": [
           [
                [
                   -120.53834170103073,
                    37.91167519443264
                 ],
                 [
                   -120.53833097219467,
                   37.91167519443264
                 ],
                 [
                   -120.53833097219467,
                   37.91196299063162
                 ],
                 [
                   -120.53834170103073,
                   37.91196299063162
                 ],
                 [
                   -120.53834170103073,
                   37.91167519443264
                 ]
      
           ]
         ]
       }
        {
                  "type": "LineString",
                  "coordinates": [
                  
               [-120.53832828998566,37.91183602185908],
               [-120.53803861141206,37.91183813800709]
             ]
             }
       ]
       }
      """
    And form field geopolygon = coordinate_geometry
    And form field startDateTime = '2019-01-20T15:00:00Z'
    And form field endDateTime = '2020-09-19T15:00:00Z'
    And form field minAltitude = 0
    And form field maxAltitude = 5000
    When method GET
    Then status 200
    And match $ contains []
